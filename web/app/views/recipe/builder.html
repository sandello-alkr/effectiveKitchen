<div class="container">
	<div class="row">
		<div class="col-md-8 viewport">
			<div class="flow" ng-repeat="flow in recipe.flows" ng-model="recipe.flows[$index]" data-drop="true" jqyoui-droppable="{multiple:true}">
				<div class="btn btn-info btn-draggable task" ng-class="{'passive-task': !task.active}" data-drag="true" data-drop="true" jqyoui-droppable="{index: {{$index}}, beforeDrop: 'beforeDrop'}" jqyoui-draggable="{index: {{$index}}, insertInline: true, direction:'jqyouiDirection', onStart: 'dragStart', onStop: 'dragStop'}" data-jqyoui-options="{revert: 'invalid', greedy: true, helper: 'clone'}" data-direction="{{item.jqyouiDirection}}" ng-model="recipe.flows[$parent.$index]" ng-repeat="task in flow.tasks track by $index" style="width: {{task.time}}px;" title="{{task.description}}">{{task.name}}</div>
			</div>
			<button class="btn btn-primary" ng-click="addFlow()">Добавить поток</button>
		</div>
		<div class="col-md-4 controls">
			<input type="text" placeholder="Фильтровать"/>
			<div class="btn btn-droppable" ng-repeat="task in tasks">
				<div class="btn btn-info btn-draggable" data-drag="true" jqyoui-draggable="{index: {{$index}}, insertInline: true, direction:'jqyouiDirection'}" data-jqyoui-options="{revert: 'invalid'}" data-direction="{{item.jqyouiDirection}}" ng-model="tasks">{{task.name}}</div>
			</div>
		</div>
	</div>
	<button class="btn btn-default" ng-click="update(recipe)">Сохранить</button>
</div>